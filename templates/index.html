<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>감정표정 디스플레이</title>
</head>
<body>
  <h1>현재 감정: <span id="emotion">Loading...</span></h1>

  <video id="video" width="640" height="480" autoplay muted loop>
    <source id="videoSource" type="video/mp4" />
    Your browser does not support the video tag.
  </video>

  <script>
    let lastEmotion = null;

    function pollEmotion() {
      fetch("/get_emotion")
        .then((res) => res.json())
        .then((data) => {
          const emotion = data.emotion;
          if (emotion !== lastEmotion) {
            document.getElementById("emotion").innerText = emotion;
            const videoSource = document.getElementById("videoSource");
            videoSource.src = `/get_video/${emotion}`;
            const video = document.getElementById("video");
            video.load();
            video.play();
            lastEmotion = emotion;
          }
        });
    }

    setInterval(pollEmotion, 1000);  // 1초마다 서버 감정 상태 확인
    window.onload = pollEmotion;
  </script>
</body>
</html>
